class _{speed;mq;constructor(c=150,p=768){this.speed=c,this.mq=p;const i=5,d="--pullHeightClosed",a="--pullHeightOpen";document.querySelectorAll(".c_pull").forEach(l=>{const s=l.querySelector(".c_pull_ttl"),n=l.querySelector(".c_pull_content"),e=l,o=l.classList.contains("-open"),t=s.offsetHeight;e.style.setProperty(d,`${t}px`),o&&(e.open=!0,e.style.setProperty(a,`${t+n.offsetHeight}px`)),s?.addEventListener("click",r=>{r.preventDefault();const m=s.offsetHeight;e.style.setProperty(d,`${m}px`),e.open?e.open&&(setTimeout(()=>{l.classList.remove("-open")},i),setTimeout(()=>{e.open=!1},c+i)):(e.open=!0,setTimeout(()=>{setTimeout(()=>{e.style.setProperty(a,`${m+n.offsetHeight}px`)},150),setTimeout(()=>{l.classList.add("-open"),document.activeElement!==n&&(n?.setAttribute("tabindex","-1"),n?.focus({preventScroll:!0}))},i+c)},10))})})}}class A{target;open;constructor(c=".c_tab",p="-open"){this.target=c,this.open=p;const i=document.querySelectorAll(c+"_list li button");function d(a){const u=a.target,l=u.closest(c),s=l?.querySelectorAll(c+"_content"),n=Array.prototype.slice.call(s),e=l?.querySelectorAll(c+"_list li button"),o=Array.prototype.slice.call(e),t=o.indexOf(a.target);o.forEach(r=>{r.classList.remove(p),r.setAttribute("aria-pressed","false"),r.setAttribute("tabindex","0")}),u.classList.add(p),u.setAttribute("aria-pressed","true"),u.setAttribute("tabindex","-1"),n.forEach(r=>{r.setAttribute("hidden",""),r.setAttribute("tabindex","-1")}),n[t].removeAttribute("hidden"),n[t].focus({preventScroll:!0})}if(i.forEach(a=>{a.addEventListener("click",d)}),i.length>0){const u=new URL(window.location.href).hash;if(u){const l=Number(u.slice(-1));isNaN(l)||i[l-1].click()}}}}const h=g=>String(g).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");class S{target;constructor(c=".c_modal"){this.target=c;const p=document.querySelectorAll(c+"_btn");let i=document.querySelectorAll(c+"_close");p.forEach(s=>{s.addEventListener("click",n=>{const e=n.currentTarget;let o=h(e?.getAttribute("aria-controls")||""),t=document.getElementById(o);const r=e.nextElementSibling;if(o)t=document.getElementById(o);else{const b=h(e.getAttribute("data-src")),v=h(e.getAttribute("data-alt"));if(!r){const y=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i.exec(b);let f="";f+='<dialog class="c_modal"><div class="c_modal_content" tabindex="-1">',y?(f+='<button class="c_modal_close"><span class="txtHidden">モーダルウィンドウを閉じる</span></button>',f+=a(l("https://www.youtube"+(y[2]||"")+".com/embed/"+y[4],Object.assign({autoplay:1,rel:0},u(y[5]||""))))):f+=`<figure><img src=${b} decoding="async" alt=${v}></figure>`,f+='<button class="c_modal_close"><span class="txtHidden">モーダルウィンドウを閉じる</span></button>',f+="</div></div></dialog>",e.insertAdjacentHTML("afterend",f)}t=e.nextElementSibling,i=document.querySelectorAll(".c_modal_close")}t?.showModal();const m=t.querySelector(c+"_content");setTimeout(()=>{m?.focus({preventScroll:!0}),document.activeElement!==m&&(m?.setAttribute("tabindex","-1"),m?.focus({preventScroll:!0}))},0),o=null,i.forEach(b=>{b.addEventListener("click",()=>{d(t)})}),t?.addEventListener("cancel",()=>{d(t)}),t?.addEventListener("click",b=>{b.target===t&&d(t)})})});function d(s){s.close("cancelled"),s.querySelector(".frameWrapper")&&s.remove()}function a(s){return'<div class="frameWrapper"><iframe frameborder="0" allow="autoplay; fullscreen" src="'+s+'"/></div>'}function u(s){const n=decodeURI(s.split("#")[0]).split("&"),e=new Map;let o;for(let t=0,r=n.length;t<r;t++)n[t]&&(o=n[t].split("="),e.set(o[0],o[1]));return e}function l(s,n){const o=Object.keys(n).map(t=>`${t}=${n[t]}`).join("&");return`${s}${s.includes("?")?"&":"?"}${o}`}}}new _;new A;new S;
